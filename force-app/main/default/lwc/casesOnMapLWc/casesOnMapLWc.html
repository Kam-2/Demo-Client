<template>
    
    <div if:true={isLoaded}>
        <lightning-spinner alternative-text="Loading..." variant="brand" class="slds-is-fixed">
        </lightning-spinner>
    </div>
    
    
    <div class="bck">
        <div id="type">
            
            <div class="topbar__content" style="display: flex; align-items: center; justify-content: space-between; padding: 10px;height: 70px;">
                <div class="slds-text-align_left">
                    
                    <button class="openbtn opncls opncls2 btn-opened" style="display: inline-block;padding-right: 0px;padding-top: 0px;padding-left: 0px;padding-bottom: 0px;" onclick={openTypes}>
                        <img src={Icon} />
                    </button>
                    <button class="slds-button slds-button_icon slds-button_icon-border" style="display: inline-block; margin-left: 20px;" title="Refresh" alternative-text="Refresh" onclick={refreshComponent}>
                        <svg class="slds-button__icon" aria-hidden="true">
                            <use xlink:href="/_slds/icons/utility-sprite/svg/symbols.svg?cache=9.28.0#refresh"></use>
                        </svg>
                    </button> 
                    
                    
                    
                </div>
                <!-- <div class="slds-text-align_center topbar__cont">
                    <h1 class="topbar__heading" style="display: inline-block;margin-left: -264px;"> Total Service Requests: {Total}</h1>
                    <h1 class="topbar__heading" style="display: inline-block; margin-left: 75px;"> Selected Service Requests: {SelectedCasesCount}</h1>
                            <div class="top-right-container ">
                                
    <lightning-combobox
        name="mapType"
        label="Select Map Type"
        value={selectedMapType}
        placeholder="Select Map Type"
        options={mapViewMode}
        onchange={handleMapViewChange}
       
        >
    </lightning-combobox>

</div>
                </div>  -->
                <div class="topbar__cont33" style="height:40px;">
    <div class="tile" style="height:60px;">
        <div class="tile-number">{Total}</div>
        <div class="tile-label">Total Service Requests</div>
    </div>

    <div class="tile" style="height:60px;">
        <div class="tile-number">{SelectedCasesCount}</div>
        <div class="tile-label">Selected Service Requests</div>
    </div>

    <div class="  slds-text-align_center top-right-container " style="padding-top: 10px;">
        <label >Select Map Type</label>
        </div>
         <!-- <label  class="">Select Map Type</label> -->
        <div class="top-right-container" style="padding-top: 10px;">
             <lightning-combobox
            name="mapType"
            value={selectedMapType}
            placeholder="Select Map Type"
            options={mapViewMode}
            onchange={handleMapViewChange}
            disabled={showMapSelection}
        ></lightning-combobox>
    </div>
</div>

                <!-- Export child comp -->
                <c-cases-on-map-export filtered-locations ={filteredLocations}
                                       map-markers={mapMarkers}
                                       is-fenced={isFenced}
                                       is-export={isExport}
                                       map-field-api-value={mapFieldApiValue} 
                                       final-types = {finalTypes}
                                       final-sub-types = {finalSubTypes}
                                       is-closed-cases = {isClosedCases}
                                        is-new-cases = {isNewCases}
                                        is-working-cases = {isWorkingCases}
                                        is-high-priority = {isHighPriority}
                                        is-low-priority = {isLowPriority}
                                        is-medium-priority =  {isMediumPriority}
                                        selected-from-date = {selectedFromDate}
                                        selected-to-date={selectedToDate}
                                        final-list-long = {finalListLong}
                                        final-list-lat = {finalListLat}
                                        total-sub-val-map = {totalSubValMap}
                                        is-sub-subtypes = {isSubSubtypes} 
                                        total-sub-sub-val-map = {totalSubSubValMap}
                                        is-subtypes = {isSubtypes}
                                        typ-sub-typ = {typSubTyp}
                                        sub-typ-sub-typ = {subTypSubTyp}></c-cases-on-map-export>
            </div> 
            
        </div>
        
        
        <div class="slds-grid slds-gutters">
            <div style="z-index:999">
                <div id="container">
                    <div class="navi" style="width:100%"> </div>
                    
                    <div if:true={showAccordation} class="infoi" style="background-color: rgba(255, 255, 255, 0.8);">
                        <lightning-accordion class="example-accordion" allow-multiple-sections-open>
                            <!-- <a href="#" class="closebtn" style="margin-left:320px;" onclick={closeAccordion}>
                                <img src={cancel} /></a> -->
                            <!-- Filter child comp -->
                            <c-cases-on-map-filter
                                                   type-list={listTypeValues}
                                                   type-subtype={mapTypeSubtype}
                                                   subtype-sub-subtype={mapSubtype_Sub_Subtype}
                                                   onpassbooleantoparent={handleStatusFromFilterComp}
                                                   onpassdatetoparent={handleDateFromFilterComp}
                                                   onpassvaluestosubmit={handleValuesFromFilterComp}
                                                   onpassprioritytoparent={handlePriorityFromFilterComp}
                                                   is-submitted = {isSubmitted}
                                                   is-combobox = {isCombobox}></c-cases-on-map-filter>
                            <!-- submit child comp -->
                            <c-cases-on-map-submit 
                                                   indexto-add1={indextoAdd} 
                                                   indexto-remove1={indextoRemove} 
                                                   subtype-add-map1 = {subtypeAddMap}
                                                   subtype-remove-map1 = {subtypeRemoveMap}
                                                   sub-subtype-add-map = {sub_subtypeAddMap}
                                                   sub-subtype-remove-map = {sub_subtypeRemoveMap}
                                                   onpassselectedvalues={handleSelectedValues}
                                                   onpassselectedsubvalues={handleSelectedSubValues}
                                                   onpassselectedsubsubvalues={handleSelectedSubSubValues}
                                                   onpasscloseaccord = {closeAccordion}></c-cases-on-map-submit>
                                                
                        </lightning-accordion>
                    </div>
                    
                </div>
            </div>
            
            <div class="slds-col slds-size_3-of-3" style="width: 100%; z-index:1;">
        
    <!-- <div class="top-right-container slds-text-align_center map__type "> -->
            <!-- <div class="top-right-container   ">
                <span> Select Map Type </span>
    <lightning-combobox
        name="mapType"
        value={selectedMapType}
        placeholder="Select Map Type"
        options={mapViewMode}
        onchange={handleMapViewChange}
        disabled={isCombobox}
        >
    </lightning-combobox>

</div> -->





      <!-- <div class="top-right1-container">
   <lightning-button 
        label="Reset" 
        onclick={handleReset}
        variant="neutral"
        disabled={isComboboxReset}>
    </lightning-button>
   
</div> -->

        
                <div class="map-root" id="map" lwc:dom="manual"></div>
                
            </div>
            </div>
        </div>
    
</template>